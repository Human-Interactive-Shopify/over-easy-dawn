{%- style -%}
    .nutrition-info-eyebrow {
        font-size: 12px;
        font-weight: 800;
        letter-spacing: .07px;
        text-transform: uppercase;
        color: #dd7845;
        margin-bottom: 1rem;
      }
      .nutrition-info-heading {
        font-size: 45px;
        font-weight: 400;
        text-transform: uppercase;
        color: #f6f3e2;
        text-shadow: 1px 1px 4px rgba(59, 55, 50, 0.3);
        line-height: .9;
        margin-bottom: 1rem;
      }
      .nutrition-info-description {
        font-size: 16px;
        line-height: 1.25;
      }
      .nutrition-info-description > * {
        {% comment %} font: inherit; {% endcomment %}
      }
      .nutrition-info-icons {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        max-width: 240px;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: .75rem;
      }
      .nutrition-info-icon-wrap img {
        max-height: 63px;
        max-width: 52px;
      }
      .nutrition-info-icon-wrap {
        width: 30%;
        text-align: center;
        margin-bottom: 1rem;
      }
      .nutrition-info-fact-image-wrap {
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }
      .nutrition-info-fact-heading {
        text-align: center;
        font-size: 20px;
        font-family: vinyl, sans-serif;
        margin-bottom: .25rem;
      }
      .product-nutrition-divider {
        height: 76px;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
      }
      .nutrition-info-content {
        max-width: 260px;
        margin-left: auto;
        margin-right: auto;
      }
      @media (min-width: 1024px) {
        .product-nutrition-inner {
          
        }
        .nutrition-info {
          display: flex;
        }
        .nutrition-info-content {
          max-width: 400px;
          margin-left: 0;
          padding-right: 1rem;
        }
        .nutrition-info-fact-heading {
          font-size: 24px;
          margin-bottom: .5rem;
        }
        .nutrition-info-eyebrow {
          font-size: 10px;
          letter-spacing: .06px;
          margin-bottom: .75rem;
        }
        .nutrition-info-heading {
          font-size: 50px;
          margin-bottom: 1.5rem;
        }
        .nutrition-info-description {
          margin-bottom: 2rem;
          font-size: 1rem;
        }
        .nutrition-info-icon-wrap {
          width: auto;
          margin-right: .75rem;
        }
        .nutrition-info-icons {
          max-width: max-content;
          margin-left: 0;
        }
        .nutrition-info-icon-wrap img {
          max-height: 68px;
          max-width: 56px;
        }
        .product-nutrition-divider {
          height: 109px;
        }
      }

    .product-nutrition-facts {
        padding: 64px 0 64px 0;
    }
    .product-nutrition-pack-heading {
        font-size: 36px;
        font-weight: 800;
        line-height: 1.2;
        color: #FFFFFF;
        letter-spacing: 0.05em;
        text-align: center;
        margin-bottom: 16px;
        margin-top: 0;
        text-transform:uppercase;
      }
      .product-nutrition-pack-description {
        color: var(--text-dark-refresh);
        font-size: 16px;
        line-height: 1.25;
        font-weight: 500;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        max-width: 80%;
      }
      .product-nutrition-packs .product-nutrition-pack {
        border-top: 1px solid #BDBDBD;
      }
      .product-nutrition-packs {
        border-bottom: 1px solid #BDBDBD);
      }
      .product-nutrition-packs .product-nutrition-pack {
        padding-top: 30px;
        padding-bottom: 30px;
      }
      .nutrition-pack-toggle:before {
        content: '';
        display: block;
        width: 22px;
        height: 2px;
        background: #FFFFFF;
      }
      .product-nutrition-pack-top {
        display: flex;
        align-items: center;
      }
      .product-nutrition-pack-top-image-wrap img {
        object-fit: contain;
        width: 80px;
        height: 60px;
      }
      .product-nutrition-pack-top-content {
        flex-grow: 1;
      }
      .product-nutrition-pack-top-heading {
        color: #FFFFFF;
        font-size: 18px;
        font-weight: 800;
        letter-spacing: .05em;
        line-height: 1.2;
        margin-bottom: .5rem;
      }
      .product-nutrition-pack-top-bags {
        font-size: 18px;
        color: #FFFFFF;
        font-weight: 800;
        letter-spacing: .05em;
      }
      .product-nutrition-pack-top-image-wrap {
        margin-right: 1rem;
        background-color: white;
        border-radius: 19px;
        display: flex;
        overflow: hidden;
      }
      .nutrition-pack-toggle {
        align-self: stretch;
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative;
        margin-left: 1rem;
      }
      .nutrition-pack-toggle:after {
        content: '';
        display: block;
        width: 22px;
        height: 2px;
        background: #FFFFFF;
        position: absolute;
        transform: rotate(90deg) translateY(-1px);
        transform-origin: center;
        transition: all .25s ease-in-out;
      }
      .product-nutrition-packs {
        max-width: 380px;
        margin-left: auto;
        margin-right: auto;
      }
      .product-nutrition-pack.active .nutrition-pack-toggle:after {
        transform: rotate(45deg);
      }
      .product-nutrition-pack.active .nutrition-pack-toggle:before {
        transform: rotate(-45deg);
      }
      .product-nutrition-pack:not(.active) .product-nutrition-pack-main {
        display: none;
      }
      .product-nutrition-pack-main {
        padding-top: 1.25rem;
        margin-bottom: .75rem;
      }
      .product-nutrition-pack-main .nutrition-info-eyebrow,.product-nutrition-pack-main .nutrition-info-heading {
        display: none;
      }
      .product-nutrition-pack-main .nutrition-info-description {
        font-size: 14px;
        font-weight: 500;
        color: #FFFFFF;
      }
      .nutrition-info .nutrition-info-props {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-family: 'Druk';
        color: #ffffff;
      }
      .nutrition-info .nutrition-info-props .m2-valprop-val {
        font-size: 28px;
        margin-bottom: .5rem;
        text-transform: lowercase;
        font-family: 'Druk';
        color: #ffffff;
      }
      .nutrition-info .nutrition-info-props .m2-valprop-name {
        font-size: 18px;
        font-weight: 400;
        font-family: Acumin;
      }
      .nutrition-info .m2-valprop-el {
        margin-bottom: 0;
        text-align: center;
        height: 120px;
        width: 120px;
        border: 1px solid #ffffff;
        border-radius: 32px;
      }
      .page-product-shakes .nutrition-info .m2-valprop-el {
        align-self: flex-start;
      }

      .nutrition-info #ingredients img {
          flex-shrink: 1;
          display: block;
          max-width: 100%;
          width: 20%;
          max-width: 100px;
          object-fit: contain;
      }
      @media (max-width: 1023px) {
        .product-nutrition-pack-main .nutrition-info-content {
          max-width: none;
        }
      }
      @media (min-width: 1024px) {
        .product-nutrition-pack-heading {
          font-size: 55px;
        }
        .product-nutrition-pack-description {
          font-size: 24px;
          margin-bottom: 5rem;
        }
        .product-nutrition-packs {
          max-width: none;
        }
        .product-nutrition-pack-top-image-wrap img {
          width: 116px;
          height: 100px;
        }
        .product-nutrition-pack-top-heading {
          font-size: 35px;
        }
        .product-nutrition-pack-top-image-wrap {
          margin-right: 1.25rem;
        }
        .product-nutrition-pack-main {
          padding-left: 13rem;
        }
        .nutrition-info .nutrition-info-props {
          max-width: 350px;
          margin-left: auto;
          margin-right: auto;
        }
        .nutrition-info #ingredients img {
          width: 100%;
          padding: 1rem;
        }
      }
      .nutrition-info-ingredients {
        display: flex;
        text-align: center;
        justify-content: space-between;
    }
    .nutrition-info-facts {
        display: flex;
        align-items: center;
    }
    .divider {
        border-left: 1px solid #BDBDBD;
        height: 48px;
    }
{%- endstyle -%}
{%- liquid
    if template.name == 'collection'
        assign product = collection.products | first
    endif

    assign props = product.metafields.overeasy.props.value
    assign naked_images = product.images | where: 'alt', "naked"
    assign vertical_images = product.images | where: 'alt', "vertical"
    assign ingredient_images = product.images | where: 'alt', "ingredient"
    assign naked_only = product.images | where: 'alt', "naked_only"
    assign collection_images = product.images | where: 'alt', "mobile"
    assign reviews_product = product

    assign isBundleProduct = false
    assign bundle_product_1 = all_products[product.metafields.sf_bundle_products.product_1]
    unless bundle_product_1.empty?
        assign isBundleProduct = true
    endunless
  -%}
<section class="product-nutrition-facts" id="product-nutrition" style="background-color:{{product.metafields.custom.product_color}};">
    <div class="product-nutrition-inner container">
        <div class="product-nutrition-pack-intro">
        <h2 class="product-nutrition-pack-heading">Nutrition Facts</h2>
        </div>
        <div class="product-nutrition-packs">
        {% assign isFirst = true %}
        {% if isBundleProduct %}
            {% for i in (1..6) %}
            {% assign bp-key = "product_" | append: i %}
            {% assign bundleProduct = all_products[product.metafields.sf_bundle_products[bp-key]] %}
            {% unless bundleProduct.empty? %}
                {% assign bp_collection_images = bundleProduct.images | where: 'alt', 'mobile' %}
                {% assign bp_props = bundleProduct.metafields.overeasy.props %}
                <div class="product-nutrition-pack{% if isFirst %} active{% endif %}">
                <div class="product-nutrition-pack-top">
                    <div class="product-nutrition-pack-top-image-wrap">
                    <img src="{{ bp_collection_images[0] | img_url: 'compact' }}" alt="">
                    </div>
                    <div class="product-nutrition-pack-top-content">
                    <div class="product-nutrition-pack-top-heading">{{ bundleProduct.title }}</div>
                    {% if bp_props.subtitle != blank %}
                        <div class="product-nutrition-pack-top-bags">{{ bp_props.subtitle }}</div>
                    {% endif %}
                    </div>
                    <div class="nutrition-pack-toggle"></div>
                </div>
                <div class="product-nutrition-pack-main">
                    {% render 'product-nutrition-facts-product', product: bundleProduct %}
                </div>
                </div>
                {% assign isFirst = false %}
            {% endunless %}
            {% endfor %}
        {% else %}
            <div class="product-nutrition-pack{% if isFirst %} active{% endif %}">
            <div class="product-nutrition-pack-top">
                <div class="product-nutrition-pack-top-image-wrap">
                <img src="{{ collection_images[0] | img_url: 'compact' }}" alt="">
                </div>
                <div class="product-nutrition-pack-top-content">
                <div class="product-nutrition-pack-top-heading">{{ product.title }}</div>
                {% if props.subtitle != blank %}
                    <div class="product-nutrition-pack-top-bags">{{ props.subtitle }}</div>
                {% endif %}
                </div>
                <div class="nutrition-pack-toggle"></div>
            </div>
            <div class="product-nutrition-pack-main">
                {% render 'product-nutrition-facts-product', product: product %}
            </div>
            </div>
            {% assign isFirst = false %}
        {% endif %}
        </div>
        <script>
        document.querySelectorAll('.product-nutrition-pack .nutrition-pack-toggle').forEach(function(toggle){
            toggle.addEventListener('click', function(e){
                e.preventDefault();
                e.stopPropagation();
                var thisPack = e.target.closest('.product-nutrition-pack');
                var allPacks = e.target.closest('.product-nutrition-packs').querySelectorAll('.product-nutrition-pack');
                var isActive = thisPack.classList.contains('active');
                allPacks.forEach(function(pack){
                    pack.classList.remove('active');
                });
                if (!isActive) {
                    thisPack.classList.add('active');
            }
            });
        });
        </script>
    </div>
</section>

  {% schema %}
{
  "name": "OE Nutrition Facts",
  "settings": [
    {
      "type": "header",
      "content": "OE Nutrition Facts"
    }
  ],
  "presets": [
    {
      "name": "OE Nutrition Facts",
      "category": "Layout"
    }
  ]
}
{% endschema %}
